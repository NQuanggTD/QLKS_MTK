@{
    Layout = "_Layout";
    ViewData["Title"] = "Quản lý đặt phòng";
}

<div class="page-header">
    <h1><i class="fas fa-calendar-check"></i> Quản lý đặt phòng</h1>
    <button class="btn btn-primary" onclick="openAddBookingModal()">
        <i class="fas fa-plus"></i> Tạo booking mới
    </button>
</div>

<!-- Filter Bar -->
<div class="filter-bar">
    <div class="filter-group">
        <label>Trạng thái:</label>
        <select id="bookingStatusFilter" onchange="filterBookings()">
            <option value="">Tất cả</option>
            <option value="0">Chờ xác nhận</option>
            <option value="1">Đã xác nhận</option>
            <option value="2">Đã nhận phòng</option>
            <option value="3">Đã trả phòng</option>
            <option value="4">Đã hủy</option>
        </select>
    </div>
    <div class="filter-group">
        <label>Từ ngày:</label>
        <input type="date" id="dateFrom" onchange="filterBookings()">
    </div>
    <div class="filter-group">
        <label>Đến ngày:</label>
        <input type="date" id="dateTo" onchange="filterBookings()">
    </div>
</div>

<!-- Bookings Table -->
<div class="dashboard-card">
    <div class="card-body">
        <div class="table-responsive">
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Mã booking</th>
                        <th>Khách hàng</th>
                        <th>Phòng</th>
                        <th>Ngày nhận</th>
                        <th>Ngày trả</th>
                        <th>Số khách</th>
                        <th>Trạng thái</th>
                        <th>Tổng tiền</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody id="bookingsTable">
                    <tr>
                        <td colspan="9" class="text-center">Đang tải...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add/Edit Booking Modal -->
<div id="bookingModal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2 id="bookingModalTitle">Tạo booking mới</h2>
            <button class="modal-close" onclick="closeBookingModal()">&times;</button>
        </div>
        <div class="modal-body">
            <form id="bookingForm">
                <input type="hidden" id="bookingId">
                <div class="form-row">
                    <div class="form-group">
                        <label>Khách hàng <span class="required">*</span></label>
                        <select id="customerId" required>
                            <option value="">Chọn khách hàng...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Phòng <span class="required">*</span></label>
                        <select id="roomId" required>
                            <option value="">Chọn phòng...</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Ngày nhận phòng <span class="required">*</span></label>
                        <input type="datetime-local" id="checkInDate" required>
                    </div>
                    <div class="form-group">
                        <label>Ngày trả phòng <span class="required">*</span></label>
                        <input type="datetime-local" id="checkOutDate" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Số khách <span class="required">*</span></label>
                        <input type="number" id="numberOfGuests" required min="1">
                    </div>
                    <div class="form-group">
                        <label>Phương thức thanh toán</label>
                        <select id="paymentMethod">
                            <option value="0">Tiền mặt</option>
                            <option value="1">Thẻ tín dụng</option>
                            <option value="2">Thẻ ghi nợ</option>
                            <option value="3">Chuyển khoản</option>
                            <option value="4">Ví điện tử</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Yêu cầu đặc biệt</label>
                    <textarea id="specialRequests" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeBookingModal()">Hủy</button>
                    <button type="submit" class="btn btn-primary">Tạo booking</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/bookings.js"></script>
}
